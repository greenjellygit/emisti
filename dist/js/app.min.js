angular.module("emistiApp",["ui.router","ngAnimate","ngCookies","pascalprecht.translate","tmh.dynamicLocale"]),angular.module("emistiApp").config(["$stateProvider","$urlRouterProvider","$locationProvider",function(e,t,n){t.otherwise("/home"),n.hashPrefix(""),e.state("home",{url:"/home",templateUrl:"js/templates/main.html"}).state("news",{url:"/news",templateUrl:"js/templates/news.html",controller:"NewsController"}).state("offer",{url:"/offer",templateUrl:"js/templates/offer.html"}).state("contact",{url:"/contact",templateUrl:"js/templates/contact.html",controller:"ContactController"})}]).constant("LOCALES",{list:[{name:"en_US",displayName:"English"},{name:"pl_PL",displayName:"Polski"}]}).config(["$translateProvider",function(e){e.useMissingTranslationHandlerLog()}]).config(["$translateProvider",function(e){e.useStaticFilesLoader({prefix:"assets/i18n/locale-",suffix:".json"}),e.preferredLanguage("pl_PL"),e.useLocalStorage()}]).config(["tmhDynamicLocaleProvider",function(e){e.localeLocationPattern("bower_components/angular-i18n/angular-locale_{{locale}}.js")}]),angular.module("emistiApp").controller("NavbarController",["$scope","$state","LocaleService",function(e,t,n){e.isLogoVisible=function(){return t.current&&"home"!=t.current.name&&""!=t.current.name},e.localeList=n.getLocaleList(),e.currentLocaleName=n.getCurrentLocale(),e.setLocale=function(t){n.setLocale(t),e.currentLocaleName=n.getCurrentLocale()}}]),angular.module("emistiApp").controller("NewsController",["$scope","$timeout","NewsService",function(e,t,n){e.newsList=[],e.isLastPage=!1,e.isNewsLoaded=!1,n.resetPage(),e.loadNewsPage=function(){n.loadNewsPage().then(function(n){e.isLastPage=n.isLastPage,e.newsList=e.newsList.concat(n.newsPage),t(function(){e.isNewsLoaded=!0},500)})},e.loadNewsPage()}]),angular.module("emistiApp").controller("ContactController",["$scope","ContactService",function(e,t){e.isEmailSend=!1,e.emailData={name:"",email:"",subject:"",text:"",attachments:[]},e.sendEmail=function(){t.sendEmail(e.emailData),e.isEmailSend=!0},e.addFile=function(t){e.emailData.attachments.push(t)}}]),angular.module("emistiApp").service("LocaleService",["$translate","LOCALES","$rootScope","tmhDynamicLocale",function(e,t,n,a){"use strict";var o=t.list,r=e.proposedLanguage(),i=function(e){return o.some(function(t){return t.name==e})},l=function(t){if(!i(t))return void console.error('Locale name "'+t+'" is invalid');r=t,e.use(t)};return n.$on("$translateChangeSuccess",function(e,t){document.documentElement.setAttribute("lang",t.language),a.set(t.language.toLowerCase().replace(/_/g,"-"))}),{getLocaleList:function(){return o},getCurrentLocale:function(){return r},setLocale:function(e){l(o[e].name)}}}]),angular.module("emistiApp").service("NewsService",["$http",function(e){var t={offset:0,limit:4};return{resetPage:function(){t.offset=0},loadNewsPage:function(n,a){return e.get("/loadNewsPage/"+t.offset+"/"+t.limit).then(function(e){return t.offset+=t.limit,e.data},function(){})}}}]),angular.module("emistiApp").service("ContactService",["$http",function(e){return{sendEmail:function(t){return e.post("/sendEmail",t).then(function(e){return e},function(){})}}}]),angular.module("emistiApp").directive("readMore",function(){function e(e,t){return e.length>t?e=e.substring(0,t)+"...":e}return{restrict:"A",scope:{text:"=",maxLength:"@",isOverflowed:"=",isCollapsed:"="},link:function(t){var n=t.text;t.text=e(t.text,t.maxLength),t.isOverflowed=t.text.length<n.length,t.$watch("isCollapsed",function(a){t.text=a?n:e(t.text,t.maxLength)})}}}),angular.module("emistiApp").directive("collapse",[function(){return{restrict:"A",link:function(e,t,n){e.$watch(n.collapse,function(e){t.toggleClass("collapsed",e)})}}}]);